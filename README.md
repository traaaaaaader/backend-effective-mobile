# Установка

---

Скачать репозиторий

```
git clone https://github.com/traaaaaaader/backend-effective-mobile.git
```

## Переменные окружения

В корневой папке находится файл `.env` со следующими переменными:

```env
PORT=4000

DB_HOST=user_db
DB_PORT=5432
DB_NAME=user_db
DB_USER=admin
DB_PASSWORD=admin

DB_URL="postgresql://admin:admin@user_db:5432/user_db"

JWT_SECRET="secret"
JWT_EXPIRES_IN="7d"

BCRYPT_ROUNDS=10
```

## Установка и запуск

1. Перейти в папку проекта

```
cd backend-effective-mobile
```

2. собрать и запустить контейнеры

```
docker-compose up -d
```

3. Сделать миграции

```
docker-compose -f docker-compose.migrate.yaml up -d
```

## Endpoints

### Регистрация пользователя

- **Конечная точка:** `POST /auth/register`
- **Аутентификация:** Не требуется
- **Данные запроса:**

```json
{
  "fullName": "строка (обязательно)",
  "birthDate": "строка даты в формате ISO8601 (обязательно)",
  "email": "строка (обязательно, валидный email)",
  "password": "строка (обязательно, минимум 6 символов)",
  "role": "строка (опционально, USER или ADMIN)"
}
```

### Вход пользователя

- **Конечная точка:** `POST /auth/login`
- **Аутентификация:** Не требуется
- **Данные запроса:**

```json
{
  "email": "строка (обязательно, валидный email)",
  "password": "строка (обязательно)"
}
```

### Получить пользователя по ID

- **Конечная точка:** `GET /users/:id`
- **Аутентификация:** Требуется
- **Параметры URL:**

- `id` - целое число (обязательно, > 0)

### Получение списка пользователей

- **Конечная точка:** `GET /users`
- **Аутентификация:** Требуется
- **Параметры запроса:**

- `skip` - целое число (опционально, >= 0) - количество записей для пропуска
- `take` - целое число (опционально, >= 1) - количество записей для взятия

### Установить статус активности пользователя

- **Конечная точка:** `PATCH /users/:id/active`
- **Аутентификация:** Требуется
- **Параметры URL:**

- `id` - целое число (обязательно, > 0)

- **Даннные запроса:**

```json
{
  "isActive": "логическое значение (обязательно)"
}
```
